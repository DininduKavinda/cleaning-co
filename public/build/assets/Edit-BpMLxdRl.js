import{q as b,W as N,r as d,j as e}from"./app-CillZM3T.js";import{A as v}from"./AuthenticatedLayout-Bd2vGtaY.js";import{g}from"./UserApi-CoI9UAVL.js";import"./index-Cb0NI_B_.js";import"./Api-Rb4oq7BM.js";function _({auth:m}){var t;const i=(t=b().props.user)==null?void 0:t.id,{data:r,setData:o,put:u,post:h,reset:n}=N({name:"",email:"",password:"",confirm_password:"",roles:[],last_login:null,active:1}),[l,x]=d.useState(!1);d.useEffect(()=>{i&&(x(!0),f())},[i]);const f=async()=>{try{const s=(await g(i)).data.data;o({name:s.name,email:s.email,roles:s.roles,active:s.active})}catch(a){console.error("Error fetching user data:",a)}},c=a=>{const{name:s,value:p}=a.target;o({...r,[s]:p})},j=a=>{a.preventDefault(),l?u(route("user_webs.update",i),{onSuccess:()=>{showToast("User updated successfully!","success"),n("password")},onError:s=>{showToast("Error updating user!","error"),console.error(s)}}):h(route("user_webs.create"),{onSuccess:()=>{showToast("User created successfully!","success"),n("password")},onError:s=>{showToast("Error creating user!","error"),console.error(s)}})};return e.jsxs(v,{user:m.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:l?"Edit User":"Create User"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:l?"Edit Profile":"Create Profile"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"/",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Users"}),e.jsx("li",{className:"breadcrumb-item active",children:l?"Edit Profile":"Create Profile"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"edit-profile",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:l?r.name:"New User"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Name"}),e.jsx("input",{className:"form-control",name:"name",value:r.name,onChange:c,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{className:"form-control",name:"email",value:r.email,onChange:c,required:!0})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",name:"password",value:r.password,onChange:c,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"form-control",name:"confirm_password",value:r.confirm_password,onChange:c,required:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Roles"," ",e.jsx("span",{children:"(write roles manually for security reasons e.g., admin, superadmin, staff, client)"})]}),e.jsx("input",{className:"form-control",name:"roles",value:r.roles.join(", "),onChange:a=>o({...r,roles:a.target.value.split(", ")})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Active"}),e.jsxs("select",{className:"form-control",name:"active",value:r.active,onChange:c,children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]}),e.jsx("div",{className:"form-footer",children:e.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:l?"Update Profile":"Create Profile"})})]})})]})})})})})]})}export{_ as default};
