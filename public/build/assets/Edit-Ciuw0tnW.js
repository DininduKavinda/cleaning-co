import{q as f,r as n,W as N,j as e}from"./app-BGrlIOB8.js";import{A as b}from"./AuthenticatedLayout-X6LyfNqf.js";import{g,u as C,c as v}from"./CityApi-Kb48KoAM.js";import{B as _}from"./BootstrapToaster-Z7gsQhx8.js";import{D}from"./DistrictDropdown-DTUsm_Ju.js";import"./index-Blqs8vea.js";import"./Api-_485fmwb.js";import"./react-select.esm-DzUBhU4r.js";import"./floating-ui.dom-DtcZXcvp.js";import"./DistrictApi-B-Mbc2sZ.js";function W({auth:h}){var m;const r=(m=f().props.city)==null?void 0:m.id,[c,o]=n.useState({type:"",message:"",title:""}),{data:a,setData:l,put:w,post:S,reset:I}=N({name_en:"",district_id:""}),[i,x]=n.useState(!1);n.useEffect(()=>{r&&(x(!0),p())},[r]);const y=(t,s)=>{l(d=>({...d,[t]:s}))},p=async()=>{try{const s=(await g(r)).data.data;l({name_en:s.name_en,district_id:s.district_id})}catch(t){console.error("Error fetching city data:",t)}},u=t=>{const{name:s,value:d}=t.target;l({...a,[s]:d})},j=async t=>{t.preventDefault();try{let s;i?s=await C(r,a):s=await v(a),s.status===201?o({type:"success",message:"success.",title:"Success"}):o({type:"error",message:s.data.message,title:"error"})}catch(s){console.error("Error saving city data:",s)}};return e.jsxs(b,{user:h.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:i?"Edit City":"Create City"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:i?"Edit City":"Create City"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"/",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Cities"}),e.jsx("li",{className:"breadcrumb-item active",children:i?"Edit City":"Create City"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"edit-city",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:i?a.city_name:"New City"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"City Name"}),e.jsx("input",{className:"form-control",name:"name_en",value:a.name_en,onChange:u,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Select District"}),e.jsx(D,{districtId:a.district_id,setDistrictId:t=>y("district_id",t)})]}),e.jsx("div",{className:"form-footer",children:e.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:i?"Update City":"Create City"})})]}),c.message&&e.jsx(_,{type:c.type,message:c.message,title:c.title})]})]})})})})})]})}export{W as default};
