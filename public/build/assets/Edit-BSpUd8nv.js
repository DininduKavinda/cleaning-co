import{q as f,r as o,W as N,j as e}from"./app-XFbUVf-n.js";import{A as b}from"./AuthenticatedLayout-B9_jAqLR.js";import{g,u as D,c as y}from"./DistrictApi-DqsiEqkn.js";import{B as _}from"./BootstrapToaster-Drkpczus.js";import{P as E}from"./ProvinceDropdown-NYxF2Z74.js";import"./index-DKFs-34d.js";import"./Api-C_e93x4I.js";import"./react-select.esm-D-AvBf3p.js";import"./floating-ui.dom-D73o39gD.js";import"./ProvinceApi-Cu3ZTS5d.js";function H({auth:h}){var m;const a=(m=f().props.district)==null?void 0:m.id,[c,d]=o.useState({type:"",message:"",title:""}),{data:i,setData:n}=N({name_en:"",province_id:""}),[r,p]=o.useState(!1);o.useEffect(()=>{a&&(p(!0),j())},[a]);const x=(t,s)=>{n(l=>({...l,[t]:s}))},j=async()=>{try{const s=(await g(a)).data.data;n({name_en:s.name_en,province_id:s.province_id})}catch(t){console.error("Error fetching district data:",t)}},u=t=>{const{name:s,value:l}=t.target;n({...i,[s]:l})},v=async t=>{t.preventDefault();try{let s;r?s=await D(a,i):s=await y(i),s.status===201?d({type:"success",message:"success.",title:"Success"}):d({type:"error",message:s.data.message,title:"error"})}catch(s){console.error("Error saving district data:",s)}};return e.jsxs(b,{user:h.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:r?"Edit District":"Create District"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:r?"Edit District":"Create District"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"/",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Districts"}),e.jsx("li",{className:"breadcrumb-item active",children:r?"Edit District":"Create District"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"edit-district",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:r?i.district_name:"New District"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"District Name"}),e.jsx("input",{className:"form-control",name:"name_en",value:i.name_en,onChange:u,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Select Province"}),e.jsx(E,{provinceId:i.province_id,setProvinceId:t=>x("province_id",t)})]}),e.jsx("div",{className:"form-footer",children:e.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:r?"Update District":"Create District"})})]}),c.message&&e.jsx(_,{type:c.type,message:c.message,title:c.title})]})]})})})})})]})}export{H as default};
