import{r as n,j as e,a as T}from"./app-CillZM3T.js";import{T as B,C as q}from"./TaskDropdown-BL_IejOB.js";import{S as F}from"./react-select.esm-BcHrBxA-.js";import{g as M,s as O}from"./StaffApi-CjA8PPH9.js";import"./ClientApi-Bb-DlfjN.js";import"./Api-Rb4oq7BM.js";import"./TaskApi-Bno1_EmL.js";import"./floating-ui.dom-D73o39gD.js";const k=({staffId:o,setStaffId:x})=>{const[f,h]=n.useState([]),[j,i]=n.useState(!1);n.useEffect(()=>{o&&g(o)},[o]);const b=async s=>{i(!0);try{const r=(await O({"full_name[like]":s})).data.data.map(l=>({value:l.id,label:l.full_name}));h(l=>[...l,...r.filter(u=>l.every(_=>_.value!==u.value))])}catch(c){console.error("Error fetching staffs:",c)}finally{i(!1)}},g=async s=>{i(!0);try{const r=(await M(s)).data.data,l={value:r.id,label:r.full_name};h(d=>d.some(u=>u.value===r.id)?d:[...d,l])}catch(c){console.error("Error fetching initial staff:",c)}finally{i(!1)}},N=s=>{s?b(s):h([])},S=s=>{x(s?s.value:null)};return e.jsx(F,{placeholder:"Select Staff",value:f.find(s=>s.value===o)||null,isLoading:j,onInputChange:N,options:f,onChange:S,isClearable:!0,cacheOptions:!0})};function U({onSearch:o,onActiveSearch:x,onTaskSearch:f,onClientSearch:h,onApproved_bySearch:j,onStaffSearch:i,onDepartmentSearch:b,onCodeSearch:g,onStartedAtSearch:N,onStatusSearch:S}){const[s,c]=n.useState(""),[r,l]=n.useState(""),[d,u]=n.useState(""),[_,y]=n.useState(""),[m,w]=n.useState(""),[p,I]=n.useState({task_id:null,client_id:null,staff_id:null,approved_by_id:null,department_id:null}),A=t=>{const a=t.target.value;c(a),o(a)},D=t=>{const a=t.target.value;l(a),g(a)},E=t=>{const a=t.target.value;u(a),N(a)},L=t=>{const a=t.target.value;y(a),S(a)},C=t=>{const a=t.target.value;w(a),x(a)},v=(t,a)=>{switch(I($=>({...$,[t]:a})),t){case"task_id":f(a);break;case"client_id":h(a);break;case"staff_id":i(a);break;case"approved_by":j(a);break;case"department_id":b(a);break}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"col-md-12 project-list",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("ul",{className:"nav nav-tabs border-tab",id:"top-tab",role:"tablist",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${m===""?"active":""}`,id:"top-home-tab","data-bs-toggle":"tab",href:"#top-home",role:"tab","aria-controls":"top-home","aria-selected":m==="",onClick:()=>C({target:{value:""}}),children:[e.jsx("i",{"data-feather":"target"}),"All"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${m==="1"?"active":""}`,id:"profile-top-tab","data-bs-toggle":"tab",href:"#top-profile",role:"tab","aria-controls":"top-profile","aria-selected":m==="1",onClick:()=>C({target:{value:"1"}}),children:[e.jsx("i",{"data-feather":"info"}),"Active"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:`nav-link ${m==="0"?"active":""}`,id:"contact-top-tab","data-bs-toggle":"tab",href:"#top-contact",role:"tab","aria-controls":"top-contact","aria-selected":m==="0",onClick:()=>C({target:{value:"0"}}),children:[e.jsx("i",{"data-feather":"check-circle"}),"Inactive"]})})]})}),e.jsxs("div",{className:"col-md-6 d-md-block d-none",children:[e.jsx("div",{className:"form-group mb-0 me-0"}),e.jsxs(T,{className:"btn btn-primary d-flex align-items-center",href:route("matter_webss.create"),children:[" ",e.jsx("i",{"data-feather":"plus-square"}),"Create New"," "]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name...",value:s,onChange:A})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Code"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code...",value:r,onChange:D})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",className:"form-control",value:d,onChange:E})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Task"}),e.jsx(B,{taskId:p.task_id,onChange:t=>v("task_id",t)})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{className:"form-control",value:_,onChange:L,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"1",children:"Approved"}),e.jsx("option",{value:"2",children:"Declined"}),e.jsx("option",{value:"2",children:"Pending"}),e.jsx("option",{value:"2",children:"New"})]})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Client"}),e.jsx(q,{clientId:p.client_id,setClientId:t=>v("client_id",t)})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Staff"}),e.jsx(k,{staffId:p.staff_id,setStaffId:t=>v("staff_id",t)})]}),e.jsxs("div",{className:"col-md-3 mt-3",children:[e.jsx("label",{children:"Approved_by"}),e.jsx(k,{approved_byId:p.approved_by_id,setApproved_byId:t=>v("approved_by_id",t)})]})]})})]})})})}export{U as default};
