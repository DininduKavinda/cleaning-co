import{q as g,r as c,j as e}from"./app-BGrlIOB8.js";import{A as C}from"./AuthenticatedLayout-X6LyfNqf.js";import{L as y}from"./LocationForm-B37VW_gt.js";import{g as w,u as _,c as E}from"./ClientApi-qUoKkyyW.js";import{B as q}from"./BootstrapToaster-Z7gsQhx8.js";import"./index-Blqs8vea.js";import"./Api-_485fmwb.js";import"./CountryDropdown-15e23UzF.js";import"./react-select.esm-DzUBhU4r.js";import"./floating-ui.dom-DtcZXcvp.js";import"./CountryApi-Crjr2a2x.js";import"./ProvinceDropdown-Cd5cFD0a.js";import"./ProvinceApi-BfCA5BaZ.js";import"./DistrictDropdown-DTUsm_Ju.js";import"./DistrictApi-B-Mbc2sZ.js";import"./CityDropdown-CLUh7akr.js";function G({auth:j}){var x;const p=g().props,[t,d]=c.useState({type:"",message:"",title:""}),n=(x=p.client)==null?void 0:x.id,[a,o]=c.useState({nic:"",name:"",mobile:"",phone:"",address:"",roles:["user"],country_id:"",province_id:"",district_id:"",city_id:"",full_name:"",email:"",password:"",password_confirmation:"",image:null,last_login:"",active:1}),[m,N]=c.useState(!1),[h,u]=c.useState(null);c.useEffect(()=>{n&&(N(!0),f())},[n]);const f=async()=>{try{const s=(await w(n)).data.data;o({nic:s.nic,name:s.name,mobile:s.mobile,phone:s.phone,address:s.address,country_id:s.country_id,province_id:s.province_id,district_id:s.district_id,city_id:s.city_id,full_name:s.full_name,email:s.email,roles:s.roles,active:s.active}),u(s.image)}catch(r){console.error("Error fetching client data:",r)}},l=r=>{const{name:s,value:i}=r.target;o({...a,[s]:i})},v=r=>{const s=r.target.files[0];o({...a,image:s}),u(URL.createObjectURL(s))},b=async r=>{r.preventDefault();const s=new FormData;Object.keys(a).forEach(i=>{s.append(i,a[i])});try{let i;m?response=await _(n,s):response=await E(s),response.status===201?d({type:"success",message:"success.",title:"Success"}):d({type:"error",message:response.data.message,title:"error"})}catch(i){console.error("Error saving client data:",i)}};return e.jsxs(C,{client:j.client,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:m?"Edit Client":"Create Client"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:"Edit Profile"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"index.html",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Users"}),e.jsx("li",{className:"breadcrumb-item active",children:"Edit Profile"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"edit-profile",children:[e.jsxs("form",{onSubmit:b,className:"row",children:[e.jsx("div",{className:"col-xl-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:"Client Profile"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"profile-title",children:e.jsxs("div",{className:"d-flex gap-3",children:[h?e.jsx("img",{className:"img-70 rounded-circle",alt:"Profile",src:h}):e.jsx("img",{className:"img-70 rounded-circle",alt:"Default",src:"../assets/images/user/default.jpg"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h3",{className:"mb-1",children:a.name||"New Client"}),e.jsx("p",{children:a.roles.join(", ")})]})]})})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"NIC"}),e.jsx("input",{className:"form-control",name:"nic",value:a.nic,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Username"}),e.jsx("input",{className:"form-control",name:"name",value:a.name,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Mobile"}),e.jsx("input",{className:"form-control",name:"mobile",value:a.mobile,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Phone"}),e.jsx("input",{className:"form-control",name:"phone",value:a.phone,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Address"}),e.jsx("input",{className:"form-control",name:"address",value:a.address,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Upload Image"}),e.jsx("input",{type:"file",className:"form-control",onChange:v})]})]})]})}),e.jsx("div",{className:"col-xl-8",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:"Edit Client Details"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{className:"form-control",name:"full_name",value:a.full_name,onChange:l,required:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{className:"form-control",name:"email",value:a.email,onChange:l,required:!0}),e.jsx("input",{hidden:!0,className:"form-control",name:"active",value:a.active,onChange:l,required:!0})]})}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",name:"password",value:a.password,onChange:l,required:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"form-control",name:"password_confirmation",value:a.password_confirmation,onChange:l,required:!0})]})})]}),e.jsx(y,{client:a,setClient:o}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:m?"Update Client":"Create Client"})})]})})]})})]}),t.message&&e.jsx(q,{type:t.type,message:t.message,title:t.title})]})})]})}export{G as default};
