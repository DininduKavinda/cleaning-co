import{r as s,j as t,a as v}from"./app--yM69B3u.js";import{A as j}from"./AuthenticatedLayout-C1S-0GyU.js";import b from"./SearchBox-CWmruoJU.js";import y from"./Table-CQWb1Lqu.js";import{a as q}from"./StaffApi-C1Gbv2gD.js";import"./index-CW7j9gvC.js";import"./Api-Rb4oq7BM.js";import"./LevelDropdown-DUexHaTf.js";import"./LevelApi-CJ693aMv.js";import"./CountryDropdown-CtBLDbds.js";import"./react-select.esm-gHH6TMdO.js";import"./floating-ui.dom-DtcZXcvp.js";import"./CountryApi-Cs8Zc2Y8.js";import"./ProvinceDropdown-B-dlCeec.js";import"./ProvinceApi-BZyxnoeU.js";import"./DistrictDropdown-Do3hVyVJ.js";import"./DistrictApi-1v0R24QC.js";import"./CityDropdown-8qBKMb44.js";import"./DepartmentDropdown-7-aID5Cx.js";import"./DepartmentApi-CjNP4ZaZ.js";import"./Table-4amYCKbp.js";import"./Pagination-D30oRUvE.js";function J({auth:m}){const[h,p]=s.useState([]),[l,f]=s.useState({level_id:"",country_id:"",province_id:"",city_id:"",district_id:"",department_id:"",nic:"",initial:"",full_name:"",dob:"",address:"",mobile:"",civil_status:"",active:""}),[u,x]=s.useState({currentPage:1,lastPage:1,total:0,perPage:10}),_={level_id:"eq",country_id:"eq",province_id:"eq",district_id:"eq",city_id:"eq",department_id:"eq",nic:"eq",initial:"like",full_name:"like",dob:"eq",address:"eq",mobile:"eq",civil_status:"eq",active:"eq"},d=async(e=1)=>{try{const i=Object.entries(l).filter(([c,n])=>n!=="").map(([c,n])=>{const S=_[c]||"eq";return`${c}[${S}]=${encodeURIComponent(n)}`}).join("&"),o=i?`&${i}`:"",r=await q(e,o);p(r.data.data),x({currentPage:r.data.meta.current_page,lastPage:r.data.meta.last_page,total:r.data.meta.total,perPage:r.data.meta.per_page})}catch(i){console.error("There was an error fetching the staff data!",i)}};s.useEffect(()=>{d()},[l]);const a=(e,i)=>{f(o=>({...o,[e]:i}))},g=e=>d(e);return t.jsxs(j,{staff:m.user,header:t.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Staffs"}),children:[t.jsx("div",{className:"container-fluid",children:t.jsx("div",{className:"page-title",children:t.jsxs("div",{className:"row",children:[t.jsxs("div",{className:"col-sm-6 col-12",children:[t.jsx("h2",{children:"Staffs"}),t.jsx("p",{className:"mb-0 text-title-gray",children:"Welcome back! Letâ€™s start from where you left."})]}),t.jsx("div",{className:"col-sm-6 col-12",children:t.jsx("ol",{className:"breadcrumb",children:t.jsx("li",{className:"breadcrumb-item",children:t.jsx(v,{href:"index.html",children:t.jsx("i",{className:"iconly-Home icli svg-color"})})})})})]})})}),t.jsxs("div",{className:"col-sm-12",children:[t.jsx(b,{onLevelSearch:e=>a("level_id",e),onCountrySearch:e=>a("country_id",e),onProvinceSearch:e=>a("province_id",e),onCitySearch:e=>a("city_id",e),onDistrictSearch:e=>a("district_id",e),onDepartmentSearch:e=>a("department_id",e),onNicSearch:e=>a("nic",e),onInitialSearch:e=>a("initial",e),onFullNameSearch:e=>a("full_name",e),onDobSearch:e=>a("dob",e),onMobileSearch:e=>a("mobile",e),onCivilStatusSearch:e=>a("civil_status",e),onActiveSearch:e=>a("active",e)}),t.jsx(y,{staffs:h,pagination:u,onPageChange:g})]})]})}export{J as default};
