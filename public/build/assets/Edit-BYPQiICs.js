import{q as f,r as m,W as N,j as e,y as l}from"./app-XFbUVf-n.js";import{A as b}from"./AuthenticatedLayout-B9_jAqLR.js";import{g as D,u as v,c as y}from"./DepartmentApi-CsHmy87l.js";import{B as E}from"./BootstrapToaster-Drkpczus.js";import"./index-DKFs-34d.js";import"./Api-C_e93x4I.js";function A({auth:p}){var o;const n=(o=f().props.department)==null?void 0:o.id,[c,i]=m.useState({type:"",message:"",title:""}),{data:r,setData:d}=N({name:""}),[t,h]=m.useState(!1);m.useEffect(()=>{n&&(h(!0),x())},[n]);const x=async()=>{try{const a=(await D(n)).data.data;d({name:a.name})}catch(s){console.error("Error fetching department data:",s)}},u=s=>{const{name:a,value:g}=s.target;d({...r,[a]:g})},j=async s=>{s.preventDefault();try{let a;t?a=await v(n,r):a=await y(r),a.status===201?(l.get(`${a.data.data.id}`),i({type:"success",message:a.data.message,title:"Success"})):a.status===200?(l.reload,i({type:"success",message:a.data.message,title:"Success"})):(l.get(`${a.data.data.id}`),i({type:"error",message:a.data.message,title:"error"}))}catch(a){console.error("Error saving department data:",a)}};return e.jsxs(b,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:t?"Edit Department":"Create Department"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:t?"Edit Department":"Create Department"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"/",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Departments"}),e.jsx("li",{className:"breadcrumb-item active",children:t?"Edit Department":"Create Department"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"edit-department",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-xl-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:t?r.name:"New Department"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Department Name"}),e.jsx("input",{className:"form-control",name:"name",value:r.name,onChange:u,required:!0})]}),e.jsx("div",{className:"form-footer",children:e.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:t?"Update Department":"Create Department"})})]}),c.message&&e.jsx(E,{type:c.type,message:c.message,title:c.title})]})]})})})})})]})}export{A as default};
