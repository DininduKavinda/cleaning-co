import{q as b,r as n,j as e}from"./app-CillZM3T.js";import{A as g}from"./AuthenticatedLayout-Bd2vGtaY.js";import{L as _}from"./LocationForm-u6Yb216a.js";import{L as C}from"./LevelDropdown-X1OLawQP.js";import{D as y}from"./DepartmentDropdown-Dq6FLqfG.js";import{g as w,u as S,c as q}from"./StaffApi-CjA8PPH9.js";import{B as D}from"./BootstrapToaster-C4x44DNK.js";import"./index-Cb0NI_B_.js";import"./Api-Rb4oq7BM.js";import"./CountryDropdown-25aSrtLt.js";import"./react-select.esm-BcHrBxA-.js";import"./floating-ui.dom-D73o39gD.js";import"./CountryApi-DYq2LDhX.js";import"./ProvinceDropdown-bmLdza3j.js";import"./ProvinceApi-BMblm3Sb.js";import"./DistrictDropdown-F9hYeZXo.js";import"./DistrictApi-Bn6T9cU6.js";import"./CityDropdown-DqxGKfwS.js";import"./LevelApi-K1S9eHl4.js";import"./DepartmentApi-D0O1VLYS.js";function X({auth:u}){var x;const m=(x=b().props.staff)==null?void 0:x.id,[o,d]=n.useState({type:"",message:"",title:""}),[a,t]=n.useState({level_id:"",name:"",department_id:"",country_id:"",province_id:"",district_id:"",city_id:"",first_name:"",last_name:"",nic:"",title:"",initial:"",full_name:"",dob:"",address:"",mobile:"",phone:"",civil_status:"",email:"",password:"",password_confirmation:"",image:"",last_login:"",active:1}),[c,j]=n.useState(!1),[h,f]=n.useState(null);n.useEffect(()=>{m&&(j(!0),p())},[m]);const p=async()=>{try{const s=(await w(m)).data.data;t({level_id:s.level_id,country_id:s.country_id,province_id:s.province_id,district_id:s.district_id,city_id:s.city_id,department_id:s.department_id,first_name:s.first_name,last_name:s.last_name,nic:s.nic,name:s.name,title:s.title,initial:s.initial,full_name:s.full_name,dob:s.dob,address:s.address,mobile:s.mobile,phone:s.phone,civil_status:s.civil_status,email:s.email,image:s.image,active:s.active}),f(s.image)}catch(i){console.error("Error fetching staff data:",i)}},l=i=>{const{name:s,value:r}=i.target;t({...a,[s]:r})},N=i=>{const s=i.target.files[0];t({...a,image:s}),f(URL.createObjectURL(s))},v=async i=>{i.preventDefault();const s=new FormData;Object.keys(a).forEach(r=>{s.append(r,a[r])}),console.log(a);try{let r;c?r=await S(m,a):r=await q(s),r.status===201?d({type:"success",message:"success.",title:"Success"}):d({type:"error",message:r.data.message,title:"error"})}catch(r){console.error("Error saving staff data:",r)}};return e.jsxs(g,{staff:u.staff,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:c?"Edit Staff":"Create Staff"}),children:[e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"page-title",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6 col-12",children:e.jsx("h2",{children:c?"Edit Profile":"Create Profile"})}),e.jsx("div",{className:"col-sm-6 col-12",children:e.jsxs("ol",{className:"breadcrumb",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"index.html",children:e.jsx("i",{className:"iconly-Home icli svg-color"})})}),e.jsx("li",{className:"breadcrumb-item",children:"Users"}),e.jsx("li",{className:"breadcrumb-item active",children:c?"Edit Profile":"Create Profile"})]})})]})})}),e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"edit-profile",children:[e.jsxs("form",{onSubmit:v,className:"row",children:[e.jsx("div",{className:"col-xl-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:"Staff Profile"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"profile-title",children:e.jsxs("div",{className:"d-flex gap-3",children:[h?e.jsx("img",{className:"img-70 rounded-circle",alt:"Profile",src:h}):e.jsx("img",{className:"img-70 rounded-circle",alt:"Default",src:"/theme/assets/images/user/user.png"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h3",{className:"mb-1",children:a.full_name||"New Staff"}),e.jsx("p",{children:a.title})]})]})})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Username"}),e.jsx("input",{className:"form-control",name:"name",value:a.name,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"NIC"}),e.jsx("input",{className:"form-control",name:"nic",value:a.nic,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Title"}),e.jsx("input",{className:"form-control",name:"title",value:a.title,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Initials"}),e.jsx("input",{className:"form-control",name:"initial",value:a.initial,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"First Name"}),e.jsx("input",{className:"form-control",name:"first_name",value:a.first_name,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Last Name"}),e.jsx("input",{className:"form-control",name:"last_name",value:a.last_name,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Mobile"}),e.jsx("input",{className:"form-control",name:"mobile",value:a.mobile,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Phone"}),e.jsx("input",{className:"form-control",name:"phone",value:a.phone,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Address"}),e.jsx("input",{className:"form-control",name:"address",value:a.address,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"form-label",children:"Upload Image"}),e.jsx("input",{type:"file",className:"form-control",onChange:N})]})]})]})}),e.jsx("div",{className:"col-xl-8",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header card-no-border pb-0",children:e.jsx("h3",{className:"card-title mb-0",children:"Edit Staff Details"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Level"}),e.jsx(C,{selectedLevel:a.level_id,onChange:i=>t({...a,level_id:i})})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Department"}),e.jsx(y,{selectedDepartment:a.department_id,onChange:i=>t({...a,department_id:i})})]})}),e.jsx("div",{className:"col-sm-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{className:"form-control",name:"full_name",value:a.full_name,onChange:l,required:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Date of Birth"}),e.jsx("input",{type:"date",className:"form-control",name:"dob",value:a.dob,onChange:l,required:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Civil Status"}),e.jsx("input",{className:"form-control",name:"civil_status",value:a.civil_status,onChange:l,required:!0})]})}),e.jsx(_,{client:a,setClient:t}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",value:a.email,onChange:l,required:!0})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",className:"form-control",name:"password",value:a.password,onChange:l,required:!0})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"form-control",name:"password_confirmation",value:a.password_confirmation,onChange:l,required:!0})]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Active"}),e.jsxs("select",{className:"form-control",name:"active",value:a.active,onChange:l,children:[e.jsx("option",{value:1,children:"Active"}),e.jsx("option",{value:0,children:"Inactive"})]})]})]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[c?"Update":"Create"," Staff"]})]})]})})]}),o.message&&e.jsx(D,{type:o.type,message:o.message,title:o.title})]})})]})}export{X as default};
